@inherits LayoutComponentBase
@using BaseUI.Components
@inject NavigationManager Navigation



<CascadingValue Value="@this">
    <Syncfusion.Blazor.Spinner.SfSpinner @ref="@SpinnerObj" Type="Syncfusion.Blazor.Spinner.SpinnerType.HighContrast" Label="Cargando..." Size="40" CssClass="e-spin-overlay" ZIndex="9999"></Syncfusion.Blazor.Spinner.SfSpinner>
    <div class="page">
        <AuthorizeView>
            <Authorized>
                <div class="sidebar">
                    <NavMenu />
                </div>
            </Authorized>
        </AuthorizeView>
        
        <div class="main">
            <AuthorizeView>
                <Authorized>
                    <div class="top-row px-4">
                        <a href="Identity/Account/Logout"
                           class="font-weight-bold text-danger">
                            Cerrar Sesión <i class=""></i>
                        </a>
                    </div>
                </Authorized>
            </AuthorizeView>
            <div class="content px-4">
                @Body
                <MessageCardComponent @ref="messageCardComponent"></MessageCardComponent>
            </div>
        </div>
    </div>
</CascadingValue>

<style>
    .custom-container {
        height: 100vh !important;
    }

    /*Centra en el medio vertical de la pantalla*/
    .custom-full-center {
        margin: 0;
        justify-content: center;
        align-items: center;
    }

    .custom-headers {
        color: #006674;
        text-align: left;
        margin: 0 0 0.3rem 0;
    }

    .principal-button {
        background-color: #7dc243 !important;
        border-radius: 3px !important;
        margin: 1rem;
        padding: 0.5rem 2rem 0.5rem 2rem !important;
    }

    /*Card*/
    .card, .card-body, .custom-headers, .card-footer {
        padding: 0.25rem !important;
        /*border: hidden;*/
        border-color: transparent;
    }

    .form-group {
        width: 100% !important;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }
</style>

@code{
    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationStateTask { get; set; }
    public AuthenticationState authenticationState;
    protected override async void OnParametersSet()
    {
        authenticationState = await AuthenticationStateTask;
    }
   
    #region MessageCardComponent

    private MessageCardComponent messageCardComponent;

    public async Task ShowCardMessage(string type, string message, string title = "", string url = "")
    {
        await messageCardComponent.ShowMessage(type, message, title, url);
    }

    #endregion

    #region Spinner Global

    private Syncfusion.Blazor.Spinner.SfSpinner SpinnerObj;

    public async Task ShowSpinner()
    {
        await SpinnerObj.ShowAsync();
    }

    public async Task HideSpinner()
    {
        await SpinnerObj.HideAsync();
    }

    #endregion
}